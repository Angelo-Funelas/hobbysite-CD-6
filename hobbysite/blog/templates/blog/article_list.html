{% extends 'base.html' %}

{% block title %}Articles{% endblock %}

{% block content %}
    <h2>Articles</h2>

    {% if user.is_authenticated %}
        <h3>Your Articles</h3>
        {% for article in user_articles %}
            <div>
                <h4><a href="{% url 'blog:article_detail' article.id %}">{{ article.title }}</a></h4>
                <p>Category: {{ article.category }}</p>
                <p>{{ article.created_on }}</p>
            </div>
        {% empty %}
            <p>You haven't written any articles yet.</p>
        {% endfor %}
    {% endif %}

    <h3>All Articles</h3>
    {% for category, articles in grouped_articles.items %}
        <h4>{{ category.name }}</h4>
        <ul>
            {% for article in articles %}
                <li><a href="{% url 'blog:article_detail' article.id %}">{{ article.title }}</a></li>
            {% empty %}
                <li>No articles in this category.</li>
            {% endfor %}
        </ul>
    {% endfor %}


    <hr>
    {% if user.is_authenticated %}
        <a href="{% url 'blog:article_create' %}">Create a new article</a>
    {% endif %}
{% endblock %}
